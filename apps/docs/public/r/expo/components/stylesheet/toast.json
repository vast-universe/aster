{
  "name": "toast",
  "type": "registry:ui",
  "description": "消息提示组件",
  "files": [
    {
      "path": "ui/toast.tsx",
      "type": "registry:ui",
      "content": "import {\n  View,\n  Text,\n  Animated,\n  Pressable,\n  StyleSheet,\n} from \"react-native\";\nimport { useEffect, useRef, useState, createContext, useContext } from \"react\";\n\ntype ToastType = \"default\" | \"success\" | \"error\" | \"warning\";\n\ninterface Toast {\n  id: string;\n  message: string;\n  type: ToastType;\n  duration?: number;\n}\n\ninterface ToastContextValue {\n  toast: (message: string, type?: ToastType, duration?: number) => void;\n}\n\nconst ToastContext = createContext<ToastContextValue | null>(null);\n\nexport function useToast() {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error(\"useToast must be used within ToastProvider\");\n  }\n  return context;\n}\n\nconst typeColors = {\n  default: \"#1f2937\",\n  success: \"#22c55e\",\n  error: \"#ef4444\",\n  warning: \"#eab308\",\n};\n\nfunction ToastItem({ toast, onRemove }: { toast: Toast; onRemove: () => void }) {\n  const opacity = useRef(new Animated.Value(0)).current;\n  const translateY = useRef(new Animated.Value(-20)).current;\n\n  useEffect(() => {\n    Animated.parallel([\n      Animated.timing(opacity, { toValue: 1, duration: 200, useNativeDriver: true }),\n      Animated.timing(translateY, { toValue: 0, duration: 200, useNativeDriver: true }),\n    ]).start();\n\n    const timer = setTimeout(() => {\n      Animated.parallel([\n        Animated.timing(opacity, { toValue: 0, duration: 200, useNativeDriver: true }),\n        Animated.timing(translateY, { toValue: -20, duration: 200, useNativeDriver: true }),\n      ]).start(() => onRemove());\n    }, toast.duration || 3000);\n\n    return () => clearTimeout(timer);\n  }, [opacity, translateY, toast.duration, onRemove]);\n\n  return (\n    <Animated.View\n      style={[\n        styles.toast,\n        { backgroundColor: typeColors[toast.type], opacity, transform: [{ translateY }] },\n      ]}\n    >\n      <Pressable onPress={onRemove}>\n        <Text style={styles.toastText}>{toast.message}</Text>\n      </Pressable>\n    </Animated.View>\n  );\n}\n\nexport function ToastProvider({ children }: { children: React.ReactNode }) {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n\n  const toast = (message: string, type: ToastType = \"default\", duration = 3000) => {\n    const id = Math.random().toString(36).slice(2);\n    setToasts((prev) => [...prev, { id, message, type, duration }]);\n  };\n\n  const removeToast = (id: string) => {\n    setToasts((prev) => prev.filter((t) => t.id !== id));\n  };\n\n  return (\n    <ToastContext.Provider value={{ toast }}>\n      {children}\n      <View style={styles.container}>\n        {toasts.map((t) => (\n          <ToastItem key={t.id} toast={t} onRemove={() => removeToast(t.id)} />\n        ))}\n      </View>\n    </ToastContext.Provider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"absolute\",\n    top: 48,\n    left: 0,\n    right: 0,\n    zIndex: 50,\n  },\n  toast: {\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    marginBottom: 8,\n    marginHorizontal: 16,\n  },\n  toastText: {\n    color: \"#fff\",\n    textAlign: \"center\",\n    fontWeight: \"500\",\n  },\n});\n"
    }
  ],
  "dependencies": [],
  "registryDependencies": []
}